# VATSWIM API Keys Endpoint Configuration
# Apache URL Rewriting and Authorization Header Passthrough

<IfModule mod_rewrite.c>
    RewriteEngine On

    # Pass Authorization header to PHP
    RewriteCond %{HTTP:Authorization} ^(.*)
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%1]

    # Handle preflight OPTIONS requests
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [L]
</IfModule>

# CORS Headers for API endpoints
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header always set Access-Control-Allow-Headers "Authorization, Content-Type, X-API-Key, X-SWIM-Source"
    Header always set Access-Control-Max-Age "86400"
</IfModule>

# Security headers
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
</IfModule>

# Prevent directory listing
Options -Indexes

# PHP settings
<IfModule mod_php.c>
    php_value upload_max_filesize 1M
    php_value post_max_size 1M
    php_value max_execution_time 30
</IfModule>
